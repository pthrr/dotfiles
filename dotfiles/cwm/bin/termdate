#!/usr/bin/env bash
#set -eu -o pipefail

BAR_FIFO=/tmp/bar_fifo

if [ ! -e "${BAR_FIFO}" ] ; then
    mkfifo ${BAR_FIFO}
fi

date()
{
    DATE=$(date '+%a, KW %V, %d.%m.%y - %H:%M')
}

while : ; do
    date
    echo -e "DATE|${DATE}"
    sleep 30
done > ${BAR_FIFO}
