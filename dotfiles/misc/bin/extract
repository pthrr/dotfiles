#!/usr/bin/env bash
set -euo pipefail

if [ -f "$1" ]; then
    case "$1" in
        *.tar.bz2|*.tbz2) tar xvjf "$1" ;;
        *.tar.gz|*.tgz) tar xvzf "$1" ;;
        *.tar.xz|*.txz) tar xvJf "$1" ;;
        *.tar.zst) tar --zstd -xvf "$1" ;;
        *.tar) tar xvf "$1" ;;
        *.bz2) bunzip2 "$1" ;;
        *.gz) gunzip "$1" ;;
        *.xz) unxz "$1" ;;
        *.zst) unzstd "$1" ;;
        *.zip) unzip "$1" ;;
        *.rar) unrar x "$1" ;;
        *.7z) 7z x "$1" ;;
        *.Z) uncompress "$1" ;;
        *.exe) cabextract "$1" ;;
        *) echo "Error: Unknown archive format for $1" >&2; exit 1 ;;
    esac
else
    echo "Error: $1 doesn't exist" >&2
    exit 1
fi
